<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zongze.mapper.UserDao">

    <select id="userInfo" resultType="com.zongze.entity.User">
        select id,userName,age,passWord from `user` where userName=#{userName}
    </select>


    <select id="geRole" resultType="com.zongze.entity.Role">
        SELECT
            r.role_key roleKey
        FROM
            user_role ur
            INNER JOIN USER u ON ur.user_id = u.id
            AND u.userName =#{userName}
            INNER JOIN role r ON r.id = ur.role_id
    </select>


    <select id="getPerm" resultType="com.zongze.entity.Menu">
    SELECT
    m.menu_perm menuPerm,
    m.menu_name menuName
    FROM
        user_role ur
        INNER JOIN USER u ON ur.user_id = u.id
        AND u.userName = #{userName}
        INNER JOIN role r ON r.id = ur.role_id
        INNER JOIN role_menu rm on rm .role_id=r.id
        INNER JOIN menu m on m.id=rm.menu_id
    </select>


    <select id="userList" resultType="com.zongze.entity.User">
        select id,userName,age,passWord from `user`
    </select>





</mapper>